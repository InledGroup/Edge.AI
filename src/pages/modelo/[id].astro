---
import PageLayout from '@/components/landing/PageLayout.astro';
import { getVisibleChatModels } from '@/lib/ai/model-registry';

export function getStaticPaths() {
  const chatModels = getVisibleChatModels();
  
  return chatModels.map(model => ({
    params: { id: model.id },
    props: { model }
  }));
}

const { model } = Astro.props;

const lang = 'es';

const translations = {
  es: {
    title: `Probar ${model.displayName} en local`,
    h1: `${model.displayName} en tu navegador`,
    subtitle: `Ejecuta ${model.displayName} directamente en tu dispositivo. Tus datos nunca salen de tu ordenador.`,
    features: {
      privacy: 'Privacidad total',
      privacyDesc: 'Todo se procesa en tu navegador. Ningún dato se envía a servidores externos.',
      local: '100% Local',
      localDesc: 'No necesitas conexión a internet una vez descargado el modelo.',
      free: 'Gratis',
      freeDesc: 'Sin suscripciones, sin registros, sin límites.',
    },
    specs: 'Especificaciones',
    size: 'Tamaño',
    memory: 'Memoria mínima',
    context: 'Contexto',
    speed: 'Velocidad',
    quality: 'Calidad',
    cta: 'Probar ahora',
    ctaSub: 'Gratis · Sin registro · En tu navegador',
    faq: 'Preguntas frecuentes',
    faq1: '¿Cómo uso este modelo en mi navegador?',
    faq1desc: `Simplemente visita Edge.AI, selecciona ${model.displayName} y comienza a chatear.`,
    faq2: '¿Es realmente privado?',
    faq2desc: 'Sí. Todo el procesamiento ocurre en tu navegador. Ningún dato se envía a servidores externos.',
    faq3: '¿Necesito GPU?',
    faq3desc: model.requiresWebGPU ? 'Sí, este modelo requiere WebGPU para un rendimiento óptimo.' : 'No, este modelo funciona con CPU.',
  }
};

const t = translations[lang as keyof typeof translations] || translations.es;

const speedLabels = {
  'very-fast': 'Muy rápido',
  'fast': 'Rápido',
  'medium': 'Medio',
  'slow': 'Lento'
};

const qualityLabels = {
  'basic': 'Básica',
  'good': 'Buena',
  'excellent': 'Excelente'
};
---

<PageLayout lang={lang} title={t.title}>
  <div class="model-page">
  <div class="model-page">
    <a href={lang === 'es' ? '/modelos' : '/models'} class="back-link">
      ← {lang === 'es' ? 'Ver todos los modelos' : 'View all models'}
    </a>

    <header class="model-header">
      <div class="model-badge">{model.tags[0] || 'AI Model'}</div>
      <h1 class="model-title">{t.h1}</h1>
      <p class="model-subtitle">{t.subtitle}</p>
      
      <div class="model-cta">
        <a href="/" class="cta-button">
          <span>{t.cta}</span>
          <span class="cta-sub">{t.ctaSub}</span>
        </a>
      </div>
    </header>

    <section class="features-section">
      <div class="feature-card">
        <div class="feature-icon privacy">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
        </div>
        <h3>{t.features.privacy}</h3>
        <p>{t.features.privacyDesc}</p>
      </div>
      
      <div class="feature-card">
        <div class="feature-icon local">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
            <line x1="8" y1="21" x2="16" y2="21"></line>
            <line x1="12" y1="17" x2="12" y2="21"></line>
          </svg>
        </div>
        <h3>{t.features.local}</h3>
        <p>{t.features.localDesc}</p>
      </div>
      
      <div class="feature-card">
        <div class="feature-icon free">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
        </div>
        <h3>{t.features.free}</h3>
        <p>{t.features.freeDesc}</p>
      </div>
    </section>

    <section class="specs-section">
      <h2>{t.specs}</h2>
      <div class="specs-grid">
        <div class="spec-item">
          <span class="spec-label">{t.size}</span>
          <span class="spec-value">{model.sizeGB} GB</span>
        </div>
        <div class="spec-item">
          <span class="spec-label">{t.memory}</span>
          <span class="spec-value">{model.minMemoryGB} GB RAM</span>
        </div>
        <div class="spec-item">
          <span class="spec-label">{t.context}</span>
          <span class="spec-value">{model.contextSize.toLocaleString()} tokens</span>
        </div>
        <div class="spec-item">
          <span class="spec-label">{t.speed}</span>
          <span class="spec-value">{speedLabels[model.speed]}</span>
        </div>
        <div class="spec-item">
          <span class="spec-label">{t.quality}</span>
          <span class="spec-value">{qualityLabels[model.quality]}</span>
        </div>
        <div class="spec-item">
          <span class="spec-label">Quantization</span>
          <span class="spec-value">{model.quantization?.toUpperCase() || 'N/A'}</span>
        </div>
      </div>
    </section>

    <section class="seo-content">
      <h2>{t.faq}</h2>
      
      <div class="faq-item">
        <h3>{t.faq1}</h3>
        <p>{t.faq1desc}</p>
      </div>
      
      <div class="faq-item">
        <h3>{t.faq2}</h3>
        <p>{t.faq2desc}</p>
      </div>
      
      <div class="faq-item">
        <h3>{t.faq3}</h3>
        <p>{t.faq3desc}</p>
      </div>
    </section>
  </div>
</PageLayout>

<style>
  .model-page {
    padding: 7rem 1rem 4rem;
    max-width: 900px;
    margin: 0 auto;
  }

  .back-link {
    display: inline-block;
    color: var(--color-text-secondary);
    font-size: 0.875rem;
    margin-bottom: 2rem;
    transition: color 0.2s;
  }

  .back-link:hover {
    color: var(--color-primary);
  }

  .model-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .model-badge {
    display: inline-block;
    padding: 0.375rem 0.875rem;
    background: rgba(40, 229, 24, 0.1);
    border: 1px solid rgba(40, 229, 24, 0.3);
    border-radius: 9999px;
    color: var(--color-primary);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 1rem;
  }

  .model-title {
    font-size: 2.5rem;
    font-weight: 800;
    line-height: 1.1;
    margin-bottom: 1rem;
    letter-spacing: -0.02em;
  }

  @media (min-width: 768px) {
    .model-title {
      font-size: 3.5rem;
    }
  }

  .model-subtitle {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    max-width: 600px;
    margin: 0 auto 2rem;
    line-height: 1.6;
  }

  .model-cta {
    margin-top: 2rem;
  }

  .cta-button {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    padding: 1rem 2.5rem;
    background: var(--color-primary);
    color: #000;
    font-weight: 700;
    font-size: 1.125rem;
    border-radius: 1rem;
    transition: all 0.3s ease;
    box-shadow: 0 0 30px rgba(40, 229, 24, 0.3);
  }

  .cta-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 40px rgba(40, 229, 24, 0.5);
  }

  .cta-sub {
    font-size: 0.75rem;
    font-weight: 500;
    opacity: 0.8;
  }

  .features-section {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
    margin-bottom: 3rem;
  }

  @media (min-width: 640px) {
    .features-section {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .feature-card {
    text-align: center;
    padding: 1.5rem;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 1rem;
  }

  .feature-icon {
    width: 3rem;
    height: 3rem;
    margin: 0 auto 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0.75rem;
  }

  .feature-icon.privacy { background: rgba(40, 229, 24, 0.1); color: var(--color-primary); }
  .feature-icon.local { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
  .feature-icon.free { background: rgba(168, 85, 247, 0.1); color: #a855f7; }

  .feature-card h3 {
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
  }

  .feature-card p {
    font-size: 0.875rem;
    color: var(--color-text-secondary);
    line-height: 1.5;
  }

  .specs-section {
    margin-bottom: 3rem;
  }

  .specs-section h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .specs-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  @media (min-width: 640px) {
    .specs-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .spec-item {
    display: flex;
    flex-direction: column;
    padding: 1rem;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 0.75rem;
    text-align: center;
  }

  .spec-label {
    font-size: 0.75rem;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.25rem;
  }

  .spec-value {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--color-text);
  }

  .seo-content {
    margin-bottom: 3rem;
  }

  .seo-content h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
  }

  .faq-item {
    margin-bottom: 1.5rem;
    padding: 1.25rem;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 0.75rem;
  }

  .faq-item h3 {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
  }

  .faq-item p {
    font-size: 0.9375rem;
    color: var(--color-text-secondary);
    line-height: 1.6;
  }
</style>
